// @codemirror/legacy-modes/mode/stex@6.4.2 downloaded from https://ga.jspm.io/npm:@codemirror/legacy-modes@6.4.2/mode/stex.js

function mkStex(t){function pushCommand(t,e){t.cmdState.push(e)}function peekCommand(t){return t.cmdState.length>0?t.cmdState[t.cmdState.length-1]:null}function popCommand(t){var e=t.cmdState.pop();e&&e.closeBracket()}function getMostPowerful(t){var e=t.cmdState;for(var n=e.length-1;n>=0;n--){var a=e[n];if(a.name!="DEFAULT")return a}return{styleIdentifier:function(){return null}}}function addPluginPattern(t,e,n){return function(){this.name=t;this.bracketNo=0;this.style=e;this.styles=n;this.argument=null;this.styleIdentifier=function(){return this.styles[this.bracketNo-1]||null};this.openBracket=function(){this.bracketNo++;return"bracket"};this.closeBracket=function(){}}}var e={};e.importmodule=addPluginPattern("importmodule","tag",["string","builtin"]);e.documentclass=addPluginPattern("documentclass","tag",["","atom"]);e.usepackage=addPluginPattern("usepackage","tag",["atom"]);e.begin=addPluginPattern("begin","tag",["atom"]);e.end=addPluginPattern("end","tag",["atom"]);e.label=addPluginPattern("label","tag",["atom"]);e.ref=addPluginPattern("ref","tag",["atom"]);e.eqref=addPluginPattern("eqref","tag",["atom"]);e.cite=addPluginPattern("cite","tag",["atom"]);e.bibitem=addPluginPattern("bibitem","tag",["atom"]);e.Bibitem=addPluginPattern("Bibitem","tag",["atom"]);e.RBibitem=addPluginPattern("RBibitem","tag",["atom"]);e.DEFAULT=function(){this.name="DEFAULT";this.style="tag";this.styleIdentifier=this.openBracket=this.closeBracket=function(){}};function setState(t,e){t.f=e}function normal(t,n){var a;if(t.match(/^\\[a-zA-Z@\xc0-\u1fff\u2060-\uffff]+/)){var r=t.current().slice(1);a=e.hasOwnProperty(r)?e[r]:e.DEFAULT;a=new a;pushCommand(n,a);setState(n,beginParams);return a.style}if(t.match(/^\\[$&%#{}_]/))return"tag";if(t.match(/^\\[,;!\/\\]/))return"tag";if(t.match("\\[")){setState(n,(function(t,e){return inMathMode(t,e,"\\]")}));return"keyword"}if(t.match("\\(")){setState(n,(function(t,e){return inMathMode(t,e,"\\)")}));return"keyword"}if(t.match("$$")){setState(n,(function(t,e){return inMathMode(t,e,"$$")}));return"keyword"}if(t.match("$")){setState(n,(function(t,e){return inMathMode(t,e,"$")}));return"keyword"}var i=t.next();if(i=="%"){t.skipToEnd();return"comment"}if(i=="}"||i=="]"){a=peekCommand(n);if(!a)return"error";a.closeBracket(i);setState(n,beginParams);return"bracket"}if(i=="{"||i=="["){a=e.DEFAULT;a=new a;pushCommand(n,a);return"bracket"}if(/\d/.test(i)){t.eatWhile(/[\w.%]/);return"atom"}t.eatWhile(/[\w\-_]/);a=getMostPowerful(n);a.name=="begin"&&(a.argument=t.current());return a.styleIdentifier()}function inMathMode(t,e,n){if(t.eatSpace())return null;if(n&&t.match(n)){setState(e,normal);return"keyword"}if(t.match(/^\\[a-zA-Z@]+/))return"tag";if(t.match(/^[a-zA-Z]+/))return"variableName.special";if(t.match(/^\\[$&%#{}_]/))return"tag";if(t.match(/^\\[,;!\/]/))return"tag";if(t.match(/^[\^_&]/))return"tag";if(t.match(/^[+\-<>|=,\/@!*:;'"`~#?]/))return null;if(t.match(/^(\d+\.\d*|\d*\.\d+|\d+)/))return"number";var a=t.next();if(a=="{"||a=="}"||a=="["||a=="]"||a=="("||a==")")return"bracket";if(a=="%"){t.skipToEnd();return"comment"}return"error"}function beginParams(t,e){var n,a=t.peek();if(a=="{"||a=="["){n=peekCommand(e);n.openBracket(a);t.eat(a);setState(e,normal);return"bracket"}if(/[ \t\r]/.test(a)){t.eat(a);return null}setState(e,normal);popCommand(e);return normal(t,e)}return{name:"stex",startState:function(){var e=t?function(t,e){return inMathMode(t,e)}:normal;return{cmdState:[],f:e}},copyState:function(t){return{cmdState:t.cmdState.slice(),f:t.f}},token:function(t,e){return e.f(t,e)},blankLine:function(t){t.f=normal;t.cmdState.length=0},languageData:{commentTokens:{line:"%"}}}}const t=mkStex(false);const e=mkStex(true);export{t as stex,e as stexMath};

