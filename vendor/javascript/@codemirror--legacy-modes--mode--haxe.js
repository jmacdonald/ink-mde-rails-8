// @codemirror/legacy-modes/mode/haxe@6.4.2 downloaded from https://ga.jspm.io/npm:@codemirror/legacy-modes@6.4.2/mode/haxe.js

function kw(e){return{type:e,style:"keyword"}}var e=kw("keyword a"),t=kw("keyword b"),n=kw("keyword c");var r=kw("operator"),o={type:"atom",style:"atom"},a={type:"attribute",style:"attribute"};var i=kw("typedef");var c={if:e,while:e,else:t,do:t,try:t,return:n,break:n,continue:n,new:n,throw:n,var:kw("var"),inline:a,static:a,using:kw("import"),public:a,private:a,cast:kw("cast"),import:kw("import"),macro:kw("macro"),function:kw("function"),catch:kw("catch"),untyped:kw("untyped"),callback:kw("cb"),for:kw("for"),switch:kw("switch"),case:kw("case"),default:kw("default"),in:r,never:kw("property_access"),trace:kw("trace"),class:i,abstract:i,enum:i,interface:i,typedef:i,extends:i,implements:i,dynamic:i,true:o,false:o,null:o};var p=/[+\-*&%=<>!?|]/;function chain(e,t,n){t.tokenize=n;return n(e,t)}function toUnescaped(e,t){var n,r=false;while((n=e.next())!=null){if(n==t&&!r)return true;r=!r&&n=="\\"}}var s;function ret(e,t,n){i=e;s=n;return t}function haxeTokenBase(e,t){var n=e.next();if(n=='"'||n=="'")return chain(e,t,haxeTokenString(n));if(/[\[\]{}\(\),;\:\.]/.test(n))return ret(n);if(n=="0"&&e.eat(/x/i)){e.eatWhile(/[\da-f]/i);return ret("number","number")}if(/\d/.test(n)||n=="-"&&e.eat(/\d/)){e.match(/^\d*(?:\.\d*(?!\.))?(?:[eE][+\-]?\d+)?/);return ret("number","number")}if(t.reAllowed&&n=="~"&&e.eat(/\//)){toUnescaped(e,"/");e.eatWhile(/[gimsu]/);return ret("regexp","string.special")}if(n=="/"){if(e.eat("*"))return chain(e,t,haxeTokenComment);if(e.eat("/")){e.skipToEnd();return ret("comment","comment")}e.eatWhile(p);return ret("operator",null,e.current())}if(n=="#"){e.skipToEnd();return ret("conditional","meta")}if(n=="@"){e.eat(/:/);e.eatWhile(/[\w_]/);return ret("metadata","meta")}if(p.test(n)){e.eatWhile(p);return ret("operator",null,e.current())}if(/[A-Z]/.test(n)){e.eatWhile(/[\w_<>]/);r=e.current();return ret("type","type",r)}e.eatWhile(/[\w_]/);var r=e.current(),o=c.propertyIsEnumerable(r)&&c[r];return o&&t.kwAllowed?ret(o.type,o.style,r):ret("variable","variable",r)}function haxeTokenString(e){return function(t,n){toUnescaped(t,e)&&(n.tokenize=haxeTokenBase);return ret("string","string")}}function haxeTokenComment(e,t){var n,r=false;while(n=e.next()){if(n=="/"&&r){t.tokenize=haxeTokenBase;break}r=n=="*"}return ret("comment","comment")}var u={atom:true,number:true,variable:true,string:true,regexp:true};function HaxeLexical(e,t,n,r,o,a){this.indented=e;this.column=t;this.type=n;this.prev=o;this.info=a;r!=null&&(this.align=r)}function inScope(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return true}function parseHaxe(e,t,n,r,o){var a=e.cc;l.state=e;l.stream=o;l.marked=null,l.cc=a;e.lexical.hasOwnProperty("align")||(e.lexical.align=true);while(true){var i=a.length?a.pop():statement;if(i(n,r)){while(a.length&&a[a.length-1].lex)a.pop()();return l.marked?l.marked:n=="variable"&&inScope(e,r)?"variableName.local":n=="variable"&&imported(e,r)?"variableName.special":t}}}function imported(e,t){if(/[a-z]/.test(t.charAt(0)))return false;var n=e.importedtypes.length;for(var r=0;r<n;r++)if(e.importedtypes[r]==t)return true}function registerimport(e){var t=l.state;for(var n=t.importedtypes;n;n=n.next)if(n.name==e)return;t.importedtypes={name:e,next:t.importedtypes}}var l={state:null,column:null,marked:null,cc:null};function pass(){for(var e=arguments.length-1;e>=0;e--)l.cc.push(arguments[e])}function cont(){pass.apply(null,arguments);return true}function inList(e,t){for(var n=t;n;n=n.next)if(n.name==e)return true;return false}function register(e){var t=l.state;if(t.context){l.marked="def";if(inList(e,t.localVars))return;t.localVars={name:e,next:t.localVars}}else if(t.globalVars){if(inList(e,t.globalVars))return;t.globalVars={name:e,next:t.globalVars}}}var x={name:"this",next:null};function pushcontext(){l.state.context||(l.state.localVars=x);l.state.context={prev:l.state.context,vars:l.state.localVars}}function popcontext(){l.state.localVars=l.state.context.vars;l.state.context=l.state.context.prev}popcontext.lex=true;function pushlex(e,t){var result=function(){var n=l.state;n.lexical=new HaxeLexical(n.indented,l.stream.column(),e,null,n.lexical,t)};result.lex=true;return result}function poplex(){var e=l.state;if(e.lexical.prev){e.lexical.type==")"&&(e.indented=e.lexical.indented);e.lexical=e.lexical.prev}}poplex.lex=true;function expect(e){function f(t){return t==e?cont():e==";"?pass():cont(f)}return f}function statement(e){return e=="@"?cont(metadef):e=="var"?cont(pushlex("vardef"),vardef1,expect(";"),poplex):e=="keyword a"?cont(pushlex("form"),expression,statement,poplex):e=="keyword b"?cont(pushlex("form"),statement,poplex):e=="{"?cont(pushlex("}"),pushcontext,block,poplex,popcontext):e==";"?cont():e=="attribute"?cont(maybeattribute):e=="function"?cont(functiondef):e=="for"?cont(pushlex("form"),expect("("),pushlex(")"),forspec1,expect(")"),poplex,statement,poplex):e=="variable"?cont(pushlex("stat"),maybelabel):e=="switch"?cont(pushlex("form"),expression,pushlex("}","switch"),expect("{"),block,poplex,poplex):e=="case"?cont(expression,expect(":")):e=="default"?cont(expect(":")):e=="catch"?cont(pushlex("form"),pushcontext,expect("("),funarg,expect(")"),statement,poplex,popcontext):e=="import"?cont(importdef,expect(";")):e=="typedef"?cont(typedef):pass(pushlex("stat"),expression,expect(";"),poplex)}function expression(e){return u.hasOwnProperty(e)||e=="type"?cont(maybeoperator):e=="function"?cont(functiondef):e=="keyword c"?cont(maybeexpression):e=="("?cont(pushlex(")"),maybeexpression,expect(")"),poplex,maybeoperator):e=="operator"?cont(expression):e=="["?cont(pushlex("]"),commasep(maybeexpression,"]"),poplex,maybeoperator):e=="{"?cont(pushlex("}"),commasep(objprop,"}"),poplex,maybeoperator):cont()}function maybeexpression(e){return e.match(/[;\}\)\],]/)?pass():pass(expression)}function maybeoperator(e,t){return e=="operator"&&/\+\+|--/.test(t)?cont(maybeoperator):e=="operator"||e==":"?cont(expression):e!=";"?e=="("?cont(pushlex(")"),commasep(expression,")"),poplex,maybeoperator):e=="."?cont(property,maybeoperator):e=="["?cont(pushlex("]"),expression,expect("]"),poplex,maybeoperator):void 0:void 0}function maybeattribute(e){return e=="attribute"?cont(maybeattribute):e=="function"?cont(functiondef):e=="var"?cont(vardef1):void 0}function metadef(e){return e==":"||e=="variable"?cont(metadef):e=="("?cont(pushlex(")"),commasep(metaargs,")"),poplex,statement):void 0}function metaargs(e){if(e=="variable")return cont()}function importdef(e,t){if(e=="variable"&&/[A-Z]/.test(t.charAt(0))){registerimport(t);return cont()}if(e=="variable"||e=="property"||e=="."||t=="*")return cont(importdef)}function typedef(e,t){if(e=="variable"&&/[A-Z]/.test(t.charAt(0))){registerimport(t);return cont()}if(e=="type"&&/[A-Z]/.test(t.charAt(0)))return cont()}function maybelabel(e){return e==":"?cont(poplex,statement):pass(maybeoperator,expect(";"),poplex)}function property(e){if(e=="variable"){l.marked="property";return cont()}}function objprop(e){e=="variable"&&(l.marked="property");if(u.hasOwnProperty(e))return cont(expect(":"),expression)}function commasep(e,t){function proceed(n){return n==","?cont(e,proceed):n==t?cont():cont(expect(t))}return function(n){return n==t?cont():pass(e,proceed)}}function block(e){return e=="}"?cont():pass(statement,block)}function vardef1(e,t){if(e=="variable"){register(t);return cont(typeuse,vardef2)}return cont()}function vardef2(e,t){return t=="="?cont(expression,vardef2):e==","?cont(vardef1):void 0}function forspec1(e,t){if(e=="variable"){register(t);return cont(forin,expression)}return pass()}function forin(e,t){if(t=="in")return cont()}function functiondef(e,t){if(e=="variable"||e=="type"){register(t);return cont(functiondef)}return t=="new"?cont(functiondef):e=="("?cont(pushlex(")"),pushcontext,commasep(funarg,")"),poplex,typeuse,statement,popcontext):void 0}function typeuse(e){if(e==":")return cont(typestring)}function typestring(e){return e=="type"||e=="variable"?cont():e=="{"?cont(pushlex("}"),commasep(typeprop,"}"),poplex):void 0}function typeprop(e){if(e=="variable")return cont(typeuse)}function funarg(e,t){if(e=="variable"){register(t);return cont(typeuse)}}const m={name:"haxe",startState:function(e){var t=["Int","Float","String","Void","Std","Bool","Dynamic","Array"];var n={tokenize:haxeTokenBase,reAllowed:true,kwAllowed:true,cc:[],lexical:new HaxeLexical(-e,0,"block",false),importedtypes:t,context:null,indented:0};return n},token:function(e,t){if(e.sol()){t.lexical.hasOwnProperty("align")||(t.lexical.align=false);t.indented=e.indentation()}if(e.eatSpace())return null;var n=t.tokenize(e,t);if(i=="comment")return n;t.reAllowed=!!(i=="operator"||i=="keyword c"||i.match(/^[\[{}\(,;:]$/));t.kwAllowed=i!=".";return parseHaxe(t,n,i,s,e)},indent:function(e,t,n){if(e.tokenize!=haxeTokenBase)return 0;var r=t&&t.charAt(0),o=e.lexical;o.type=="stat"&&r=="}"&&(o=o.prev);var a=o.type,i=r==a;return a=="vardef"?o.indented+4:a=="form"&&r=="{"?o.indented:a=="stat"||a=="form"?o.indented+n.unit:o.info!="switch"||i?o.align?o.column+(i?0:1):o.indented+(i?0:n.unit):o.indented+(/^(?:case|default)\b/.test(t)?n.unit:2*n.unit)},languageData:{indentOnInput:/^\s*[{}]$/,commentTokens:{line:"//",block:{open:"/*",close:"*/"}}}};const d={name:"hxml",startState:function(){return{define:false,inString:false}},token:function(e,t){var n=e.peek();var r=e.sol();if(n=="#"){e.skipToEnd();return"comment"}if(r&&n=="-"){var o="variable-2";e.eat(/-/);if(e.peek()=="-"){e.eat(/-/);o="keyword a"}if(e.peek()=="D"){e.eat(/[D]/);o="keyword c";t.define=true}e.eatWhile(/[A-Z]/i);return o}n=e.peek();if(t.inString==false&&n=="'"){t.inString=true;e.next()}if(t.inString==true){e.skipTo("'")||e.skipToEnd();if(e.peek()=="'"){e.next();t.inString=false}return"string"}e.next();return null},languageData:{commentTokens:{line:"#"}}};export{m as haxe,d as hxml};

