// @codemirror/legacy-modes/mode/jinja2@6.4.2 downloaded from https://ga.jspm.io/npm:@codemirror/legacy-modes@6.4.2/mode/jinja2.js

var e=["and","as","block","endblock","by","cycle","debug","else","elif","extends","filter","endfilter","firstof","do","for","endfor","if","endif","ifchanged","endifchanged","ifequal","endifequal","ifnotequal","set","raw","endraw","endifnotequal","in","include","load","not","now","or","parsed","regroup","reversed","spaceless","call","endcall","macro","endmacro","endspaceless","ssi","templatetag","openblock","closeblock","openvariable","closevariable","without","context","openbrace","closebrace","opencomment","closecomment","widthratio","url","with","endwith","get_current_language","trans","endtrans","noop","blocktrans","endblocktrans","get_available_languages","get_current_language_bidi","pluralize","autoescape","endautoescape"],n=/^[+\-*&%=<>!?|~^]/,t=/^[:\[\(\{]/,a=["true","false"],i=/^(\d[+\-\*\/])?\d+(\.\d+)?/;e=new RegExp("(("+e.join(")|(")+"))\\b");a=new RegExp("(("+a.join(")|(")+"))\\b");function tokenBase(r,o){var s=r.peek();if(o.incomment){if(r.skipTo("#}")){r.eatWhile(/\#|}/);o.incomment=false}else r.skipToEnd();return"comment"}if(o.intag){if(o.operator){o.operator=false;if(r.match(a))return"atom";if(r.match(i))return"number"}if(o.sign){o.sign=false;if(r.match(a))return"atom";if(r.match(i))return"number"}if(o.instring){s==o.instring&&(o.instring=false);r.next();return"string"}if(s=="'"||s=='"'){o.instring=s;r.next();return"string"}if(o.inbraces>0&&s==")"){r.next();o.inbraces--}else if(s=="("){r.next();o.inbraces++}else if(o.inbrackets>0&&s=="]"){r.next();o.inbrackets--}else if(s=="["){r.next();o.inbrackets++}else{if(!o.lineTag&&(r.match(o.intag+"}")||r.eat("-")&&r.match(o.intag+"}"))){o.intag=false;return"tag"}if(r.match(n)){o.operator=true;return"operator"}if(r.match(t))o.sign=true;else{if(r.column()==1&&o.lineTag&&r.match(e))return"keyword";if(r.eat(" ")||r.sol()){if(r.match(e))return"keyword";if(r.match(a))return"atom";if(r.match(i))return"number";r.sol()&&r.next()}else r.next()}}return"variable"}if(r.eat("{")){if(r.eat("#")){o.incomment=true;if(r.skipTo("#}")){r.eatWhile(/\#|}/);o.incomment=false}else r.skipToEnd();return"comment"}if(s=r.eat(/\{|%/)){o.intag=s;o.inbraces=0;o.inbrackets=0;s=="{"&&(o.intag="}");r.eat("-");return"tag"}}else if(r.eat("#")){if(r.peek()=="#"){r.skipToEnd();return"comment"}if(!r.eol()){o.intag=true;o.lineTag=true;o.inbraces=0;o.inbrackets=0;return"tag"}}r.next()}const r={name:"jinja2",startState:function(){return{tokenize:tokenBase,inbrackets:0,inbraces:0}},token:function(e,n){var t=n.tokenize(e,n);if(e.eol()&&n.lineTag&&!n.instring&&n.inbraces==0&&n.inbrackets==0){n.intag=false;n.lineTag=false}return t},languageData:{commentTokens:{block:{open:"{#",close:"#}",line:"##"}}}};export{r as jinja2};

