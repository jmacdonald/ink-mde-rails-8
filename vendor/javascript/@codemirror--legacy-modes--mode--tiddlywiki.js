// @codemirror/legacy-modes/mode/tiddlywiki@6.4.2 downloaded from https://ga.jspm.io/npm:@codemirror/legacy-modes@6.4.2/mode/tiddlywiki.js

var e={};var t={allTags:true,closeAll:true,list:true,newJournal:true,newTiddler:true,permaview:true,saveChanges:true,search:true,slider:true,tabs:true,tag:true,tagging:true,tags:true,tiddler:true,timeline:true,today:true,version:true,option:true,with:true,filter:true};var n=/[\w_\-]/i,r=/^\-\-\-\-+$/,i=/^\/\*\*\*$/,a=/^\*\*\*\/$/,o=/^<<<$/,u=/^\/\/\{\{\{$/,c=/^\/\/\}\}\}$/,f=/^<!--\{\{\{-->$/,k=/^<!--\}\}\}-->$/,l=/^\{\{\{$/,m=/^\}\}\}$/,s=/.*?\}\}\}/;function chain(e,t,n){t.tokenize=n;return n(e,t)}function tokenBase(t,m){var s=t.sol(),h=t.peek();m.block=false;if(s&&/[<\/\*{}\-]/.test(h)){if(t.match(l)){m.block=true;return chain(t,m,twTokenCode)}if(t.match(o))return"quote";if(t.match(i)||t.match(a))return"comment";if(t.match(u)||t.match(c)||t.match(f)||t.match(k))return"comment";if(t.match(r))return"contentSeparator"}t.next();if(s&&/[\/\*!#;:>|]/.test(h)){if(h=="!"){t.skipToEnd();return"header"}if(h=="*"){t.eatWhile("*");return"comment"}if(h=="#"){t.eatWhile("#");return"comment"}if(h==";"){t.eatWhile(";");return"comment"}if(h==":"){t.eatWhile(":");return"comment"}if(h==">"){t.eatWhile(">");return"quote"}if(h=="|")return"header"}if(h=="{"&&t.match("{{"))return chain(t,m,twTokenCode);if(/[hf]/i.test(h)&&/[ti]/i.test(t.peek())&&t.match(/\b(ttps?|tp|ile):\/\/[\-A-Z0-9+&@#\/%?=~_|$!:,.;]*[A-Z0-9+&@#\/%=~_|$]/i))return"link";if(h=='"')return"string";if(h=="~")return"brace";if(/[\[\]]/.test(h)&&t.match(h))return"brace";if(h=="@"){t.eatWhile(n);return"link"}if(/\d/.test(h)){t.eatWhile(/\d/);return"number"}if(h=="/"){if(t.eat("%"))return chain(t,m,twTokenComment);if(t.eat("/"))return chain(t,m,twTokenEm)}if(h=="_"&&t.eat("_"))return chain(t,m,twTokenUnderline);if(h=="-"&&t.eat("-")){if(t.peek()!=" ")return chain(t,m,twTokenStrike);if(t.peek()==" ")return"brace"}if(h=="'"&&t.eat("'"))return chain(t,m,twTokenStrong);if(h=="<"&&t.eat("<"))return chain(t,m,twTokenMacro);t.eatWhile(/[\w\$_]/);return e.propertyIsEnumerable(t.current())?"keyword":null}function twTokenComment(e,t){var n,r=false;while(n=e.next()){if(n=="/"&&r){t.tokenize=tokenBase;break}r=n=="%"}return"comment"}function twTokenStrong(e,t){var n,r=false;while(n=e.next()){if(n=="'"&&r){t.tokenize=tokenBase;break}r=n=="'"}return"strong"}function twTokenCode(e,t){var n=t.block;if(n&&e.current())return"comment";if(!n&&e.match(s)){t.tokenize=tokenBase;return"comment"}if(n&&e.sol()&&e.match(m)){t.tokenize=tokenBase;return"comment"}e.next();return"comment"}function twTokenEm(e,t){var n,r=false;while(n=e.next()){if(n=="/"&&r){t.tokenize=tokenBase;break}r=n=="/"}return"emphasis"}function twTokenUnderline(e,t){var n,r=false;while(n=e.next()){if(n=="_"&&r){t.tokenize=tokenBase;break}r=n=="_"}return"link"}function twTokenStrike(e,t){var n,r=false;while(n=e.next()){if(n=="-"&&r){t.tokenize=tokenBase;break}r=n=="-"}return"deleted"}function twTokenMacro(e,n){if(e.current()=="<<")return"meta";var r=e.next();if(!r){n.tokenize=tokenBase;return null}if(r==">"&&e.peek()==">"){e.next();n.tokenize=tokenBase;return"meta"}e.eatWhile(/[\w\$_]/);return t.propertyIsEnumerable(e.current())?"keyword":null}const h={name:"tiddlywiki",startState:function(){return{tokenize:tokenBase}},token:function(e,t){if(e.eatSpace())return null;var n=t.tokenize(e,t);return n}};export{h as tiddlyWiki};

