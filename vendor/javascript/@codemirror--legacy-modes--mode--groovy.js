// @codemirror/legacy-modes/mode/groovy@6.4.2 downloaded from https://ga.jspm.io/npm:@codemirror/legacy-modes@6.4.2/mode/groovy.js

function words(e){var n={},r=e.split(" ");for(var o=0;o<r.length;++o)n[r[o]]=true;return n}var e=words("abstract as assert boolean break byte case catch char class const continue def default do double else enum extends final finally float for goto if implements import in instanceof int interface long native new package private protected public return short static strictfp super switch synchronized threadsafe throw throws trait transient try void volatile while");var n=words("catch class def do else enum finally for if interface switch trait try while");var r=words("return break continue");var o=words("null true false this");var i;function tokenBase(a,s){var l=a.next();if(l=='"'||l=="'")return startString(l,a,s);if(/[\[\]{}\(\),;\:\.]/.test(l)){i=l;return null}if(/\d/.test(l)){a.eatWhile(/[\w\.]/);if(a.eat(/eE/)){a.eat(/\+\-/);a.eatWhile(/\d/)}return"number"}if(l=="/"){if(a.eat("*")){s.tokenize.push(tokenComment);return tokenComment(a,s)}if(a.eat("/")){a.skipToEnd();return"comment"}if(expectExpression(s.lastToken,false))return startString(l,a,s)}if(l=="-"&&a.eat(">")){i="->";return null}if(/[+\-*&%=<>!?|\/~]/.test(l)){a.eatWhile(/[+\-*&%=<>|~]/);return"operator"}a.eatWhile(/[\w\$_]/);if(l=="@"){a.eatWhile(/[\w\$_\.]/);return"meta"}if(s.lastToken==".")return"property";if(a.eat(":")){i="proplabel";return"property"}var u=a.current();if(o.propertyIsEnumerable(u))return"atom";if(e.propertyIsEnumerable(u)){n.propertyIsEnumerable(u)?i="newstatement":r.propertyIsEnumerable(u)&&(i="standalone");return"keyword"}return"variable"}tokenBase.isBase=true;function startString(e,n,r){var o=false;if(e!="/"&&n.eat(e)){if(!n.eat(e))return"string";o=true}function t(n,r){var i,a=false,s=!o;while((i=n.next())!=null){if(i==e&&!a){if(!o)break;if(n.match(e+e)){s=true;break}}if(e=='"'&&i=="$"&&!a){if(n.eat("{")){r.tokenize.push(tokenBaseUntilBrace());return"string"}if(n.match(/^\w/,false)){r.tokenize.push(tokenVariableDeref);return"string"}}a=!a&&i=="\\"}s&&r.tokenize.pop();return"string"}r.tokenize.push(t);return t(n,r)}function tokenBaseUntilBrace(){var e=1;function t(n,r){if(n.peek()=="}"){e--;if(e==0){r.tokenize.pop();return r.tokenize[r.tokenize.length-1](n,r)}}else n.peek()=="{"&&e++;return tokenBase(n,r)}t.isBase=true;return t}function tokenVariableDeref(e,n){var r=e.match(/^(\.|[\w\$_]+)/);r&&e.match(r[0]=="."?/^[\w$_]/:/^\./)||n.tokenize.pop();return r?r[0]=="."?null:"variable":n.tokenize[n.tokenize.length-1](e,n)}function tokenComment(e,n){var r,o=false;while(r=e.next()){if(r=="/"&&o){n.tokenize.pop();break}o=r=="*"}return"comment"}function expectExpression(e,n){return!e||e=="operator"||e=="->"||/[\.\[\{\(,;:]/.test(e)||e=="newstatement"||e=="keyword"||e=="proplabel"||e=="standalone"&&!n}function Context(e,n,r,o,i){this.indented=e;this.column=n;this.type=r;this.align=o;this.prev=i}function pushContext(e,n,r){return e.context=new Context(e.indented,n,r,null,e.context)}function popContext(e){var n=e.context.type;n!=")"&&n!="]"&&n!="}"||(e.indented=e.context.indented);return e.context=e.context.prev}const a={name:"groovy",startState:function(e){return{tokenize:[tokenBase],context:new Context(-e,0,"top",false),indented:0,startOfLine:true,lastToken:null}},token:function(e,n){var r=n.context;if(e.sol()){r.align==null&&(r.align=false);n.indented=e.indentation();n.startOfLine=true;if(r.type=="statement"&&!expectExpression(n.lastToken,true)){popContext(n);r=n.context}}if(e.eatSpace())return null;i=null;var o=n.tokenize[n.tokenize.length-1](e,n);if(o=="comment")return o;r.align==null&&(r.align=true);if(i!=";"&&i!=":"||r.type!="statement")if(i=="->"&&r.type=="statement"&&r.prev.type=="}"){popContext(n);n.context.align=false}else if(i=="{")pushContext(n,e.column(),"}");else if(i=="[")pushContext(n,e.column(),"]");else if(i=="(")pushContext(n,e.column(),")");else if(i=="}"){while(r.type=="statement")r=popContext(n);r.type=="}"&&(r=popContext(n));while(r.type=="statement")r=popContext(n)}else i==r.type?popContext(n):(r.type=="}"||r.type=="top"||r.type=="statement"&&i=="newstatement")&&pushContext(n,e.column(),"statement");else popContext(n);n.startOfLine=false;n.lastToken=i||o;return o},indent:function(e,n,r){if(!e.tokenize[e.tokenize.length-1].isBase)return null;var o=n&&n.charAt(0),i=e.context;i.type!="statement"||expectExpression(e.lastToken,true)||(i=i.prev);var a=o==i.type;return i.type=="statement"?i.indented+(o=="{"?0:r.unit):i.align?i.column+(a?0:1):i.indented+(a?0:r.unit)},languageData:{indentOnInput:/^\s*[{}]$/,commentTokens:{line:"//",block:{open:"/*",close:"*/"}},closeBrackets:{brackets:["(","[","{","'",'"',"'''",'"""']}}};export{a as groovy};

