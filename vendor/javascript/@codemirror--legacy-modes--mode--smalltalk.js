// @codemirror/legacy-modes/mode/smalltalk@6.4.2 downloaded from https://ga.jspm.io/npm:@codemirror/legacy-modes@6.4.2/mode/smalltalk.js

var e=/[+\-\/\\*~<>=@%|&?!.,:;^]/;var t=/true|false|nil|self|super|thisContext/;var Context=function(e,t){this.next=e;this.parent=t};var Token=function(e,t,n){this.name=e;this.context=t;this.eos=n};var State=function(){this.context=new Context(next,null);this.expectVariable=true;this.indentation=0;this.userIndentationDelta=0};State.prototype.userIndent=function(e,t){this.userIndentationDelta=e>0?e/t-this.indentation:0};var next=function(n,a,i){var r=new Token(null,a,false);var s=n.next();if(s==='"')r=nextComment(n,new Context(nextComment,a));else if(s==="'")r=nextString(n,new Context(nextString,a));else if(s==="#")if(n.peek()==="'"){n.next();r=nextSymbol(n,new Context(nextSymbol,a))}else n.eatWhile(/[^\s.{}\[\]()]/)?r.name="string.special":r.name="meta";else if(s==="$"){if(n.next()==="<"){n.eatWhile(/[^\s>]/);n.next()}r.name="string.special"}else if(s==="|"&&i.expectVariable)r.context=new Context(nextTemporaries,a);else if(/[\[\]{}()]/.test(s)){r.name="bracket";r.eos=/[\[{(]/.test(s);s==="["?i.indentation++:s==="]"&&(i.indentation=Math.max(0,i.indentation-1))}else if(e.test(s)){n.eatWhile(e);r.name="operator";r.eos=s!==";"}else if(/\d/.test(s)){n.eatWhile(/[\w\d]/);r.name="number"}else if(/[\w_]/.test(s)){n.eatWhile(/[\w\d_]/);r.name=i.expectVariable?t.test(n.current())?"keyword":"variable":null}else r.eos=i.expectVariable;return r};var nextComment=function(e,t){e.eatWhile(/[^"]/);return new Token("comment",e.eat('"')?t.parent:t,true)};var nextString=function(e,t){e.eatWhile(/[^']/);return new Token("string",e.eat("'")?t.parent:t,false)};var nextSymbol=function(e,t){e.eatWhile(/[^']/);return new Token("string.special",e.eat("'")?t.parent:t,false)};var nextTemporaries=function(e,t){var n=new Token(null,t,false);var a=e.next();if(a==="|"){n.context=t.parent;n.eos=true}else{e.eatWhile(/[^|]/);n.name="variable"}return n};const n={name:"smalltalk",startState:function(){return new State},token:function(e,t){t.userIndent(e.indentation(),e.indentUnit);if(e.eatSpace())return null;var n=t.context.next(e,t.context,t);t.context=n.context;t.expectVariable=n.eos;return n.name},blankLine:function(e,t){e.userIndent(0,t)},indent:function(e,t,n){var a=e.context.next===next&&t&&t.charAt(0)==="]"?-1:e.userIndentationDelta;return(e.indentation+a)*n.unit},languageData:{indentOnInput:/^\s*\]$/}};export{n as smalltalk};

