// @codemirror/legacy-modes/mode/q@6.4.2 downloaded from https://ga.jspm.io/npm:@codemirror/legacy-modes@6.4.2/mode/q.js

var e,t=buildRE(["abs","acos","aj","aj0","all","and","any","asc","asin","asof","atan","attr","avg","avgs","bin","by","ceiling","cols","cor","cos","count","cov","cross","csv","cut","delete","deltas","desc","dev","differ","distinct","div","do","each","ej","enlist","eval","except","exec","exit","exp","fby","fills","first","fkeys","flip","floor","from","get","getenv","group","gtime","hclose","hcount","hdel","hopen","hsym","iasc","idesc","if","ij","in","insert","inter","inv","key","keys","last","like","list","lj","load","log","lower","lsq","ltime","ltrim","mavg","max","maxs","mcount","md5","mdev","med","meta","min","mins","mmax","mmin","mmu","mod","msum","neg","next","not","null","or","over","parse","peach","pj","plist","prd","prds","prev","prior","rand","rank","ratios","raze","read0","read1","reciprocal","reverse","rload","rotate","rsave","rtrim","save","scan","select","set","setenv","show","signum","sin","sqrt","ss","ssr","string","sublist","sum","sums","sv","system","tables","tan","til","trim","txf","type","uj","ungroup","union","update","upper","upsert","value","var","view","views","vs","wavg","where","where","while","within","wj","wj1","wsum","xasc","xbar","xcol","xcols","xdesc","xexp","xgroup","xkey","xlog","xprev","xrank"]),n=/[|/&^!+:\\\-*%$=~#;@><,?_\'\"\[\(\]\)\s{}]/;function buildRE(e){return new RegExp("^("+e.join("|")+")$")}function tokenBase(o,r){var i=o.sol(),s=o.next();e=null;if(i){if(s=="/")return(r.tokenize=tokenLineComment)(o,r);if(s=="\\")return o.eol()||/\s/.test(o.peek())?(o.skipToEnd(),/^\\\s*$/.test(o.current())?(r.tokenize=tokenCommentToEOF)(o):r.tokenize=tokenBase,"comment"):(r.tokenize=tokenBase,"builtin")}if(/\s/.test(s))return o.peek()=="/"?(o.skipToEnd(),"comment"):"null";if(s=='"')return(r.tokenize=tokenString)(o,r);if(s=="`")return o.eatWhile(/[A-Za-z\d_:\/.]/),"macroName";if("."==s&&/\d/.test(o.peek())||/\d/.test(s)){var a=null;o.backUp(1);o.match(/^\d{4}\.\d{2}(m|\.\d{2}([DT](\d{2}(:\d{2}(:\d{2}(\.\d{1,9})?)?)?)?)?)/)||o.match(/^\d+D(\d{2}(:\d{2}(:\d{2}(\.\d{1,9})?)?)?)/)||o.match(/^\d{2}:\d{2}(:\d{2}(\.\d{1,9})?)?/)||o.match(/^\d+[ptuv]{1}/)?a="temporal":(o.match(/^0[NwW]{1}/)||o.match(/^0x[\da-fA-F]*/)||o.match(/^[01]+[b]{1}/)||o.match(/^\d+[chijn]{1}/)||o.match(/-?\d*(\.\d*)?(e[+\-]?\d+)?(e|f)?/))&&(a="number");return!a||(s=o.peek())&&!n.test(s)?(o.next(),"error"):a}return/[A-Za-z]|\./.test(s)?(o.eatWhile(/[A-Za-z._\d]/),t.test(o.current())?"keyword":"variable"):/[|/&^!+:\\\-*%$=~#;@><\.,?_\']/.test(s)||/[{}\(\[\]\)]/.test(s)?null:"error"}function tokenLineComment(e,t){return e.skipToEnd(),/\/\s*$/.test(e.current())?(t.tokenize=tokenBlockComment)(e,t):t.tokenize=tokenBase,"comment"}function tokenBlockComment(e,t){var n=e.sol()&&e.peek()=="\\";e.skipToEnd();n&&/^\\\s*$/.test(e.current())&&(t.tokenize=tokenBase);return"comment"}function tokenCommentToEOF(e){return e.skipToEnd(),"comment"}function tokenString(e,t){var n,o=false,r=false;while(n=e.next()){if(n=='"'&&!o){r=true;break}o=!o&&n=="\\"}r&&(t.tokenize=tokenBase);return"string"}function pushContext(e,t,n){e.context={prev:e.context,indent:e.indent,col:n,type:t}}function popContext(e){e.indent=e.context.indent;e.context=e.context.prev}const o={name:"q",startState:function(){return{tokenize:tokenBase,context:null,indent:0,col:0}},token:function(t,n){if(t.sol()){n.context&&n.context.align==null&&(n.context.align=false);n.indent=t.indentation()}var o=n.tokenize(t,n);o!="comment"&&n.context&&n.context.align==null&&n.context.type!="pattern"&&(n.context.align=true);if(e=="(")pushContext(n,")",t.column());else if(e=="[")pushContext(n,"]",t.column());else if(e=="{")pushContext(n,"}",t.column());else if(/[\]\}\)]/.test(e)){while(n.context&&n.context.type=="pattern")popContext(n);n.context&&e==n.context.type&&popContext(n)}else if(e=="."&&n.context&&n.context.type=="pattern")popContext(n);else if(/atom|string|variable/.test(o)&&n.context)if(/[\}\]]/.test(n.context.type))pushContext(n,"pattern",t.column());else if(n.context.type=="pattern"&&!n.context.align){n.context.align=true;n.context.col=t.column()}return o},indent:function(e,t,n){var o=t&&t.charAt(0);var r=e.context;if(/[\]\}]/.test(o))while(r&&r.type=="pattern")r=r.prev;var i=r&&o==r.type;return r?r.type=="pattern"?r.col:r.align?r.col+(i?0:1):r.indent+(i?0:n.unit):0}};export{o as q};

