// @codemirror/legacy-modes/mode/r@6.4.2 downloaded from https://ga.jspm.io/npm:@codemirror/legacy-modes@6.4.2/mode/r.js

function wordObj(e){var t={};for(var r=0;r<e.length;++r)t[e[r]]=true;return t}var e=["NULL","NA","Inf","NaN","NA_integer_","NA_real_","NA_complex_","NA_character_","TRUE","FALSE"];var t=["list","quote","bquote","eval","return","call","parse","deparse"];var r=["if","else","repeat","while","function","for","in","next","break"];var n=["if","else","repeat","while","function","for"];var a=wordObj(e);var i=wordObj(t);var o=wordObj(r);var u=wordObj(n);var c=/[+\-*\/^<>=!&|~$:]/;var l;function tokenBase(e,t){l=null;var r=e.next();if(r=="#"){e.skipToEnd();return"comment"}if(r=="0"&&e.eat("x")){e.eatWhile(/[\da-f]/i);return"number"}if(r=="."&&e.eat(/\d/)){e.match(/\d*(?:e[+\-]?\d+)?/);return"number"}if(/\d/.test(r)){e.match(/\d*(?:\.\d+)?(?:e[+\-]\d+)?L?/);return"number"}if(r=="'"||r=='"'){t.tokenize=tokenString(r);return"string"}if(r=="`"){e.match(/[^`]+`/);return"string.special"}if(r=="."&&e.match(/.(?:[.]|\d+)/))return"keyword";if(/[a-zA-Z\.]/.test(r)){e.eatWhile(/[\w\.]/);var n=e.current();if(a.propertyIsEnumerable(n))return"atom";if(o.propertyIsEnumerable(n)){u.propertyIsEnumerable(n)&&!e.match(/\s*if(\s+|$)/,false)&&(l="block");return"keyword"}return i.propertyIsEnumerable(n)?"builtin":"variable"}if(r=="%"){e.skipTo("%")&&e.next();return"variableName.special"}if(r=="<"&&e.eat("-")||r=="<"&&e.match("<-")||r=="-"&&e.match(/>>?/))return"operator";if(r=="="&&t.ctx.argList)return"operator";if(c.test(r)){if(r=="$")return"operator";e.eatWhile(c);return"operator"}if(/[\(\){}\[\];]/.test(r)){l=r;return r==";"?"punctuation":null}return null}function tokenString(e){return function(t,r){if(t.eat("\\")){var n=t.next();n=="x"?t.match(/^[a-f0-9]{2}/i):(n=="u"||n=="U")&&t.eat("{")&&t.skipTo("}")?t.next():n=="u"?t.match(/^[a-f0-9]{4}/i):n=="U"?t.match(/^[a-f0-9]{8}/i):/[0-7]/.test(n)&&t.match(/^[0-7]{1,2}/);return"string.special"}var a;while((a=t.next())!=null){if(a==e){r.tokenize=tokenBase;break}if(a=="\\"){t.backUp(1);break}}return"string"}}var f=1,s=2,p=4;function push(e,t,r){e.ctx={type:t,indent:e.indent,flags:0,column:r.column(),prev:e.ctx}}function setFlag(e,t){var r=e.ctx;e.ctx={type:r.type,indent:r.indent,flags:r.flags|t,column:r.column,prev:r.prev}}function pop(e){e.indent=e.ctx.indent;e.ctx=e.ctx.prev}const d={name:"r",startState:function(e){return{tokenize:tokenBase,ctx:{type:"top",indent:-e,flags:s},indent:0,afterIdent:false}},token:function(e,t){if(e.sol()){(t.ctx.flags&3)==0&&(t.ctx.flags|=s);t.ctx.flags&p&&pop(t);t.indent=e.indentation()}if(e.eatSpace())return null;var r=t.tokenize(e,t);r!="comment"&&(t.ctx.flags&s)==0&&setFlag(t,f);l!=";"&&l!="{"&&l!="}"||t.ctx.type!="block"||pop(t);if(l=="{")push(t,"}",e);else if(l=="("){push(t,")",e);t.afterIdent&&(t.ctx.argList=true)}else l=="["?push(t,"]",e):l=="block"?push(t,"block",e):l==t.ctx.type?pop(t):t.ctx.type=="block"&&r!="comment"&&setFlag(t,p);t.afterIdent=r=="variable"||r=="keyword";return r},indent:function(e,t,r){if(e.tokenize!=tokenBase)return 0;var n=t&&t.charAt(0),a=e.ctx,i=n==a.type;a.flags&p&&(a=a.prev);return a.type=="block"?a.indent+(n=="{"?0:r.unit):a.flags&f?a.column+(i?0:1):a.indent+(i?0:r.unit)},languageData:{wordChars:".",commentTokens:{line:"#"},autocomplete:e.concat(t,r)}};export{d as r};

