// @codemirror/legacy-modes/mode/lua@6.4.2 downloaded from https://ga.jspm.io/npm:@codemirror/legacy-modes@6.4.2/mode/lua.js

function prefixRE(e){return new RegExp("^(?:"+e.join("|")+")","i")}function wordRE(e){return new RegExp("^(?:"+e.join("|")+")$","i")}var e=wordRE(["_G","_VERSION","assert","collectgarbage","dofile","error","getfenv","getmetatable","ipairs","load","loadfile","loadstring","module","next","pairs","pcall","print","rawequal","rawget","rawset","require","select","setfenv","setmetatable","tonumber","tostring","type","unpack","xpcall","coroutine.create","coroutine.resume","coroutine.running","coroutine.status","coroutine.wrap","coroutine.yield","debug.debug","debug.getfenv","debug.gethook","debug.getinfo","debug.getlocal","debug.getmetatable","debug.getregistry","debug.getupvalue","debug.setfenv","debug.sethook","debug.setlocal","debug.setmetatable","debug.setupvalue","debug.traceback","close","flush","lines","read","seek","setvbuf","write","io.close","io.flush","io.input","io.lines","io.open","io.output","io.popen","io.read","io.stderr","io.stdin","io.stdout","io.tmpfile","io.type","io.write","math.abs","math.acos","math.asin","math.atan","math.atan2","math.ceil","math.cos","math.cosh","math.deg","math.exp","math.floor","math.fmod","math.frexp","math.huge","math.ldexp","math.log","math.log10","math.max","math.min","math.modf","math.pi","math.pow","math.rad","math.random","math.randomseed","math.sin","math.sinh","math.sqrt","math.tan","math.tanh","os.clock","os.date","os.difftime","os.execute","os.exit","os.getenv","os.remove","os.rename","os.setlocale","os.time","os.tmpname","package.cpath","package.loaded","package.loaders","package.loadlib","package.path","package.preload","package.seeall","string.byte","string.char","string.dump","string.find","string.format","string.gmatch","string.gsub","string.len","string.lower","string.match","string.rep","string.reverse","string.sub","string.upper","table.concat","table.insert","table.maxn","table.remove","table.sort"]);var t=wordRE(["and","break","elseif","false","nil","not","or","return","true","function","end","if","then","else","do","while","repeat","until","for","in","local"]);var a=wordRE(["function","if","repeat","do","\\(","{"]);var n=wordRE(["end","until","\\)","}"]);var r=prefixRE(["end","until","\\)","}","else","elseif"]);function readBracket(e){var t=0;while(e.eat("="))++t;e.eat("[");return t}function normal(e,t){var a=e.next();if(a=="-"&&e.eat("-")){if(e.eat("[")&&e.eat("["))return(t.cur=bracketed(readBracket(e),"comment"))(e,t);e.skipToEnd();return"comment"}if(a=='"'||a=="'")return(t.cur=string(a))(e,t);if(a=="["&&/[\[=]/.test(e.peek()))return(t.cur=bracketed(readBracket(e),"string"))(e,t);if(/\d/.test(a)){e.eatWhile(/[\w.%]/);return"number"}if(/[\w_]/.test(a)){e.eatWhile(/[\w\\\-_.]/);return"variable"}return null}function bracketed(e,t){return function(a,n){var r,i=null;while((r=a.next())!=null)if(i==null)r=="]"&&(i=0);else if(r=="=")++i;else{if(r=="]"&&i==e){n.cur=normal;break}i=null}return t}}function string(e){return function(t,a){var n,r=false;while((n=t.next())!=null){if(n==e&&!r)break;r=!r&&n=="\\"}r||(a.cur=normal);return"string"}}const i={name:"lua",startState:function(){return{basecol:0,indentDepth:0,cur:normal}},token:function(r,i){if(r.eatSpace())return null;var o=i.cur(r,i);var l=r.current();o=="variable"&&(t.test(l)?o="keyword":e.test(l)&&(o="builtin"));o!="comment"&&o!="string"&&(a.test(l)?++i.indentDepth:n.test(l)&&--i.indentDepth);return o},indent:function(e,t,a){var n=r.test(t);return e.basecol+a.unit*(e.indentDepth-(n?1:0))},languageData:{indentOnInput:/^\s*(?:end|until|else|\)|\})$/,commentTokens:{line:"--",block:{open:"--[[",close:"]]--"}}}};export{i as lua};

