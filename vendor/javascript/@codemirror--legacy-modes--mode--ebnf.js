// @codemirror/legacy-modes/mode/ebnf@6.4.2 downloaded from https://ga.jspm.io/npm:@codemirror/legacy-modes@6.4.2/mode/ebnf.js

var e={slash:0,parenthesis:1};var t={comment:0,_string:1,characterClass:2};const a={name:"ebnf",startState:function(){return{stringType:null,commentType:null,braced:0,lhs:true,localState:null,stack:[],inDefinition:false}},token:function(a,c){if(a){if(c.stack.length===0)if(a.peek()=='"'||a.peek()=="'"){c.stringType=a.peek();a.next();c.stack.unshift(t._string)}else if(a.match("/*")){c.stack.unshift(t.comment);c.commentType=e.slash}else if(a.match("(*")){c.stack.unshift(t.comment);c.commentType=e.parenthesis}switch(c.stack[0]){case t._string:while(c.stack[0]===t._string&&!a.eol())if(a.peek()===c.stringType){a.next();c.stack.shift()}else if(a.peek()==="\\"){a.next();a.next()}else a.match(/^.[^\\\"\']*/);return c.lhs?"property":"string";case t.comment:while(c.stack[0]===t.comment&&!a.eol())if(c.commentType===e.slash&&a.match("*/")){c.stack.shift();c.commentType=null}else if(c.commentType===e.parenthesis&&a.match("*)")){c.stack.shift();c.commentType=null}else a.match(/^.[^\*]*/);return"comment";case t.characterClass:while(c.stack[0]===t.characterClass&&!a.eol())a.match(/^[^\]\\]+/)||a.match(".")||c.stack.shift();return"operator"}var r=a.peek();switch(r){case"[":a.next();c.stack.unshift(t.characterClass);return"bracket";case":":case"|":case";":a.next();return"operator";case"%":if(a.match("%%"))return"header";if(a.match(/[%][A-Za-z]+/))return"keyword";if(a.match(/[%][}]/))return"bracket";break;case"/":if(a.match(/[\/][A-Za-z]+/))return"keyword";case"\\":if(a.match(/[\][a-z]+/))return"string.special";case".":if(a.match("."))return"atom";case"*":case"-":case"+":case"^":if(a.match(r))return"atom";case"$":if(a.match("$$"))return"builtin";if(a.match(/[$][0-9]+/))return"variableName.special";case"<":if(a.match(/<<[a-zA-Z_]+>>/))return"builtin"}if(a.match("//")){a.skipToEnd();return"comment"}if(a.match("return"))return"operator";if(a.match(/^[a-zA-Z_][a-zA-Z0-9_]*/))return a.match(/(?=[\(.])/)?"variable":a.match(/(?=[\s\n]*[:=])/)?"def":"variableName.special";if(["[","]","(",")"].indexOf(a.peek())!=-1){a.next();return"bracket"}a.eatSpace()||a.next();return null}}};export{a as ebnf};

