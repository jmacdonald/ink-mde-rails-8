// @codemirror/legacy-modes/mode/python@6.4.2 downloaded from https://ga.jspm.io/npm:@codemirror/legacy-modes@6.4.2/mode/python.js

function wordRegexp(e){return new RegExp("^(("+e.join(")|(")+"))\\b")}var e=wordRegexp(["and","or","not","is"]);var t=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield","in","False","True"];var n=["abs","all","any","bin","bool","bytearray","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__","NotImplemented","Ellipsis","__debug__"];function top(e){return e.scopes[e.scopes.length-1]}function mkPython(r){var i="error";var a=r.delimiters||r.singleDelimiters||/^[\(\)\[\]\{\}@,:`=;\.\\]/;var o=[r.singleOperators,r.doubleOperators,r.doubleDelimiters,r.tripleDelimiters,r.operators||/^([-+*/%\/&|^]=?|[<>=]+|\/\/=?|\*\*=?|!=|[~!@]|\.\.\.)/];for(var s=0;s<o.length;s++)o[s]||o.splice(s--,1);var l=r.hangingIndent;var u=t,c=n;r.extra_keywords!=void 0&&(u=u.concat(r.extra_keywords));r.extra_builtins!=void 0&&(c=c.concat(r.extra_builtins));var f=!(r.version&&Number(r.version)<3);if(f){var p=r.identifiers||/^[_A-Za-z\u00A1-\uFFFF][_A-Za-z0-9\u00A1-\uFFFF]*/;u=u.concat(["nonlocal","None","aiter","anext","async","await","breakpoint","match","case"]);c=c.concat(["ascii","bytes","exec","print"]);var d=new RegExp("^(([rbuf]|(br)|(rb)|(fr)|(rf))?('{3}|\"{3}|['\"]))","i")}else{p=r.identifiers||/^[_A-Za-z][_A-Za-z0-9]*/;u=u.concat(["exec","print"]);c=c.concat(["apply","basestring","buffer","cmp","coerce","execfile","file","intern","long","raw_input","reduce","reload","unichr","unicode","xrange","None"]);d=new RegExp("^(([rubf]|(ur)|(br))?('{3}|\"{3}|['\"]))","i")}var m=wordRegexp(u);var h=wordRegexp(c);function tokenBase(e,t){var n=e.sol()&&t.lastToken!="\\";n&&(t.indent=e.indentation());if(n&&top(t).type=="py"){var r=top(t).offset;if(e.eatSpace()){var a=e.indentation();a>r?pushPyScope(e,t):a<r&&dedent(e,t)&&e.peek()!="#"&&(t.errorToken=true);return null}var o=tokenBaseInner(e,t);r>0&&dedent(e,t)&&(o+=" "+i);return o}return tokenBaseInner(e,t)}function tokenBaseInner(t,n,r){if(t.eatSpace())return null;if(!r&&t.match(/^#.*/))return"comment";if(t.match(/^[0-9\.]/,false)){var s=false;t.match(/^[\d_]*\.\d+(e[\+\-]?\d+)?/i)&&(s=true);t.match(/^[\d_]+\.\d*/)&&(s=true);t.match(/^\.\d+/)&&(s=true);if(s){t.eat(/J/i);return"number"}var l=false;t.match(/^0x[0-9a-f_]+/i)&&(l=true);t.match(/^0b[01_]+/i)&&(l=true);t.match(/^0o[0-7_]+/i)&&(l=true);if(t.match(/^[1-9][\d_]*(e[\+\-]?[\d_]+)?/)){t.eat(/J/i);l=true}t.match(/^0(?![\dx])/i)&&(l=true);if(l){t.eat(/L/i);return"number"}}if(t.match(d)){var u=t.current().toLowerCase().indexOf("f")!==-1;if(u){n.tokenize=formatStringFactory(t.current(),n.tokenize);return n.tokenize(t,n)}n.tokenize=tokenStringFactory(t.current(),n.tokenize);return n.tokenize(t,n)}for(var c=0;c<o.length;c++)if(t.match(o[c]))return"operator";if(t.match(a))return"punctuation";if(n.lastToken=="."&&t.match(p))return"property";if(t.match(m)||t.match(e))return"keyword";if(t.match(h))return"builtin";if(t.match(/^(self|cls)\b/))return"self";if(t.match(p))return n.lastToken=="def"||n.lastToken=="class"?"def":"variable";t.next();return r?null:i}function formatStringFactory(e,t){while("rubf".indexOf(e.charAt(0).toLowerCase())>=0)e=e.substr(1);var n=e.length==1;var a="string";function tokenNestedExpr(e){return function(t,n){var r=tokenBaseInner(t,n,true);r=="punctuation"&&(t.current()=="{"?n.tokenize=tokenNestedExpr(e+1):t.current()=="}"&&(n.tokenize=e>1?tokenNestedExpr(e-1):tokenString));return r}}function tokenString(o,s){while(!o.eol()){o.eatWhile(/[^'"\{\}\\]/);if(o.eat("\\")){o.next();if(n&&o.eol())return a}else{if(o.match(e)){s.tokenize=t;return a}if(o.match("{{"))return a;if(o.match("{",false)){s.tokenize=tokenNestedExpr(0);return o.current()?a:s.tokenize(o,s)}if(o.match("}}"))return a;if(o.match("}"))return i;o.eat(/['"]/)}}if(n){if(r.singleLineStringErrors)return i;s.tokenize=t}return a}tokenString.isString=true;return tokenString}function tokenStringFactory(e,t){while("rubf".indexOf(e.charAt(0).toLowerCase())>=0)e=e.substr(1);var n=e.length==1;var a="string";function tokenString(o,s){while(!o.eol()){o.eatWhile(/[^'"\\]/);if(o.eat("\\")){o.next();if(n&&o.eol())return a}else{if(o.match(e)){s.tokenize=t;return a}o.eat(/['"]/)}}if(n){if(r.singleLineStringErrors)return i;s.tokenize=t}return a}tokenString.isString=true;return tokenString}function pushPyScope(e,t){while(top(t).type!="py")t.scopes.pop();t.scopes.push({offset:top(t).offset+e.indentUnit,type:"py",align:null})}function pushBracketScope(e,t,n){var r=e.match(/^[\s\[\{\(]*(?:#|$)/,false)?null:e.column()+1;t.scopes.push({offset:t.indent+(l||e.indentUnit),type:n,align:r})}function dedent(e,t){var n=e.indentation();while(t.scopes.length>1&&top(t).offset>n){if(top(t).type!="py")return true;t.scopes.pop()}return top(t).offset!=n}function tokenLexer(e,t){if(e.sol()){t.beginningOfLine=true;t.dedent=false}var n=t.tokenize(e,t);var r=e.current();if(t.beginningOfLine&&r=="@")return e.match(p,false)?"meta":f?"operator":i;/\S/.test(r)&&(t.beginningOfLine=false);n!="variable"&&n!="builtin"||t.lastToken!="meta"||(n="meta");r!="pass"&&r!="return"||(t.dedent=true);r=="lambda"&&(t.lambda=true);r==":"&&!t.lambda&&top(t).type=="py"&&e.match(/^\s*(?:#|$)/,false)&&pushPyScope(e,t);if(r.length==1&&!/string|comment/.test(n)){var a="[({".indexOf(r);a!=-1&&pushBracketScope(e,t,"])}".slice(a,a+1));a="])}".indexOf(r);if(a!=-1){if(top(t).type!=r)return i;t.indent=t.scopes.pop().offset-(l||e.indentUnit)}}t.dedent&&e.eol()&&top(t).type=="py"&&t.scopes.length>1&&t.scopes.pop();return n}return{name:"python",startState:function(){return{tokenize:tokenBase,scopes:[{offset:0,type:"py",align:null}],indent:0,lastToken:null,lambda:false,dedent:0}},token:function(e,t){var n=t.errorToken;n&&(t.errorToken=false);var r=tokenLexer(e,t);r&&r!="comment"&&(t.lastToken=r=="keyword"||r=="punctuation"?e.current():r);r=="punctuation"&&(r=null);e.eol()&&t.lambda&&(t.lambda=false);return n?i:r},indent:function(e,t,n){if(e.tokenize!=tokenBase)return e.tokenize.isString?null:0;var r=top(e);var i=r.type==t.charAt(0)||r.type=="py"&&!e.dedent&&/^(else:|elif |except |finally:)/.test(t);return r.align!=null?r.align-(i?1:0):r.offset-(i?l||n.unit:0)},languageData:{autocomplete:t.concat(n).concat(["exec","print"]),indentOnInput:/^\s*([\}\]\)]|else:|elif |except |finally:)$/,commentTokens:{line:"#"},closeBrackets:{brackets:["(","[","{","'",'"',"'''",'"""']}}}}var words=function(e){return e.split(" ")};const r=mkPython({});const i=mkPython({extra_keywords:words("by cdef cimport cpdef ctypedef enum except extern gil include nogil property public readonly struct union DEF IF ELIF ELSE")});export{i as cython,mkPython,r as python};

