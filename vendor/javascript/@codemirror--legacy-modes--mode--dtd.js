// @codemirror/legacy-modes/mode/dtd@6.4.2 downloaded from https://ga.jspm.io/npm:@codemirror/legacy-modes@6.4.2/mode/dtd.js

var t;function ret(e,n){t=n;return e}function tokenBase(t,e){var n=t.next();if(n!="<"||!t.eat("!")){if(n=="<"&&t.eat("?")){e.tokenize=inBlock("meta","?>");return ret("meta",n)}if(n=="#"&&t.eatWhile(/[\w]/))return ret("atom","tag");if(n=="|")return ret("keyword","separator");if(n.match(/[\(\)\[\]\-\.,\+\?>]/))return ret(null,n);if(n.match(/[\[\]]/))return ret("rule",n);if(n=='"'||n=="'"){e.tokenize=tokenString(n);return e.tokenize(t,e)}if(t.eatWhile(/[a-zA-Z\?\+\d]/)){var r=t.current();r.substr(r.length-1,r.length).match(/\?|\+/)!==null&&t.backUp(1);return ret("tag","tag")}if(n=="%"||n=="*")return ret("number","number");t.eatWhile(/[\w\\\-_%.{,]/);return ret(null,null)}if(t.eatWhile(/[\-]/)){e.tokenize=tokenSGMLComment;return tokenSGMLComment(t,e)}if(t.eatWhile(/[\w]/))return ret("keyword","doindent")}function tokenSGMLComment(t,e){var n,r=0;while((n=t.next())!=null){if(r>=2&&n==">"){e.tokenize=tokenBase;break}r=n=="-"?r+1:0}return ret("comment","comment")}function tokenString(t){return function(e,n){var r,a=false;while((r=e.next())!=null){if(r==t&&!a){n.tokenize=tokenBase;break}a=!a&&r=="\\"}return ret("string","tag")}}function inBlock(t,e){return function(n,r){while(!n.eol()){if(n.match(e)){r.tokenize=tokenBase;break}n.next()}return t}}const e={name:"dtd",startState:function(){return{tokenize:tokenBase,baseIndent:0,stack:[]}},token:function(e,n){if(e.eatSpace())return null;var r=n.tokenize(e,n);var a=n.stack[n.stack.length-1];e.current()=="["||t==="doindent"||t=="["?n.stack.push("rule"):t==="endtag"?n.stack[n.stack.length-1]="endtag":e.current()=="]"||t=="]"||t==">"&&a=="rule"?n.stack.pop():t=="["&&n.stack.push("[");return r},indent:function(e,n,r){var a=e.stack.length;if(n.charAt(0)==="]")a--;else if(n.substr(n.length-1,n.length)===">"){n.substr(0,1)==="<"||t=="doindent"&&n.length>1||(t=="doindent"?a--:t==">"&&n.length>1||t=="tag"&&n!==">"||(t=="tag"&&e.stack[e.stack.length-1]=="rule"?a--:t=="tag"?a++:n===">"&&e.stack[e.stack.length-1]=="rule"&&t===">"?a--:n===">"&&e.stack[e.stack.length-1]=="rule"||(n.substr(0,1)!=="<"&&n.substr(0,1)===">"?a-=1:n===">"||(a-=1))));t!=null&&t!="]"||a--}return e.baseIndent+a*r.unit},languageData:{indentOnInput:/^\s*[\]>]$/}};export{e as dtd};

