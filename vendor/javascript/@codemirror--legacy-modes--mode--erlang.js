// @codemirror/legacy-modes/mode/erlang@6.4.2 downloaded from https://ga.jspm.io/npm:@codemirror/legacy-modes@6.4.2/mode/erlang.js

var e=["-type","-spec","-export_type","-opaque"];var r=["after","begin","catch","case","cond","end","fun","if","let","of","query","receive","try","when"];var t=/[\->,;]/;var n=["->",";",","];var a=["and","andalso","band","bnot","bor","bsl","bsr","bxor","div","not","or","orelse","rem","xor"];var o=/[\+\-\*\/<>=\|:!]/;var i=["=","+","-","*","/",">",">=","<","=<","=:=","==","=/=","/=","||","<-","!"];var u=/[<\(\[\{]/;var s=["<<","(","[","{"];var c=/[>\)\]\}]/;var l=["}","]",")",">>"];var _=["is_atom","is_binary","is_bitstring","is_boolean","is_float","is_function","is_integer","is_list","is_number","is_pid","is_port","is_record","is_reference","is_tuple","atom","binary","bitstring","boolean","function","integer","list","number","pid","port","record","reference","tuple"];var f=["abs","adler32","adler32_combine","alive","apply","atom_to_binary","atom_to_list","binary_to_atom","binary_to_existing_atom","binary_to_list","binary_to_term","bit_size","bitstring_to_list","byte_size","check_process_code","contact_binary","crc32","crc32_combine","date","decode_packet","delete_module","disconnect_node","element","erase","exit","float","float_to_list","garbage_collect","get","get_keys","group_leader","halt","hd","integer_to_list","internal_bif","iolist_size","iolist_to_binary","is_alive","is_atom","is_binary","is_bitstring","is_boolean","is_float","is_function","is_integer","is_list","is_number","is_pid","is_port","is_process_alive","is_record","is_reference","is_tuple","length","link","list_to_atom","list_to_binary","list_to_bitstring","list_to_existing_atom","list_to_float","list_to_integer","list_to_pid","list_to_tuple","load_module","make_ref","module_loaded","monitor_node","node","node_link","node_unlink","nodes","notalive","now","open_port","pid_to_list","port_close","port_command","port_connect","port_control","pre_loaded","process_flag","process_info","processes","purge_module","put","register","registered","round","self","setelement","size","spawn","spawn_link","spawn_monitor","spawn_opt","split_binary","statistics","term_to_binary","time","throw","tl","trunc","tuple_size","tuple_to_list","unlink","unregister","whereis"];var m=/[\w@Ø-ÞÀ-Öß-öø-ÿ]/;var p=/[0-7]{1,3}|[bdefnrstv\\"']|\^[a-zA-Z]|x[0-9a-zA-Z]{2}|x{[0-9a-zA-Z]+}/;function tokenizer(k,v){if(v.in_string){v.in_string=!doubleQuote(k);return rval(v,k,"string")}if(v.in_atom){v.in_atom=!singleQuote(k);return rval(v,k,"atom")}if(k.eatSpace())return rval(v,k,"whitespace");if(!peekToken(v)&&k.match(/-\s*[a-zß-öø-ÿ][\wØ-ÞÀ-Öß-öø-ÿ]*/))return is_member(k.current(),e)?rval(v,k,"type"):rval(v,k,"attribute");var b=k.next();if(b=="%"){k.skipToEnd();return rval(v,k,"comment")}if(b==":")return rval(v,k,"colon");if(b=="?"){k.eatSpace();k.eatWhile(m);return rval(v,k,"macro")}if(b=="#"){k.eatSpace();k.eatWhile(m);return rval(v,k,"record")}if(b=="$")return k.next()!="\\"||k.match(p)?rval(v,k,"number"):rval(v,k,"error");if(b==".")return rval(v,k,"dot");if(b=="'"){if(!(v.in_atom=!singleQuote(k))){if(k.match(/\s*\/\s*[0-9]/,false)){k.match(/\s*\/\s*[0-9]/,true);return rval(v,k,"fun")}if(k.match(/\s*\(/,false)||k.match(/\s*:/,false))return rval(v,k,"function")}return rval(v,k,"atom")}if(b=='"'){v.in_string=!doubleQuote(k);return rval(v,k,"string")}if(/[A-Z_Ø-ÞÀ-Ö]/.test(b)){k.eatWhile(m);return rval(v,k,"variable")}if(/[a-z_ß-öø-ÿ]/.test(b)){k.eatWhile(m);if(k.match(/\s*\/\s*[0-9]/,false)){k.match(/\s*\/\s*[0-9]/,true);return rval(v,k,"fun")}var g=k.current();return is_member(g,r)?rval(v,k,"keyword"):is_member(g,a)?rval(v,k,"operator"):k.match(/\s*\(/,false)?!is_member(g,f)||peekToken(v).token==":"&&peekToken(v,2).token!="erlang"?is_member(g,_)?rval(v,k,"guard"):rval(v,k,"function"):rval(v,k,"builtin"):lookahead(k)==":"?rval(v,k,g=="erlang"?"builtin":"function"):is_member(g,["true","false"])?rval(v,k,"boolean"):rval(v,k,"atom")}var h=/[0-9]/;var y=/[0-9a-zA-Z]/;if(h.test(b)){k.eatWhile(h);k.eat("#")?k.eatWhile(y)||k.backUp(1):k.eat(".")&&(k.eatWhile(h)?k.eat(/[eE]/)&&(k.eat(/[-+]/)?k.eatWhile(h)||k.backUp(2):k.eatWhile(h)||k.backUp(1)):k.backUp(1));return rval(v,k,"number")}return nongreedy(k,u,s)?rval(v,k,"open_paren"):nongreedy(k,c,l)?rval(v,k,"close_paren"):greedy(k,t,n)?rval(v,k,"separator"):greedy(k,o,i)?rval(v,k,"operator"):rval(v,k,null)}function nongreedy(e,r,t){if(e.current().length==1&&r.test(e.current())){e.backUp(1);while(r.test(e.peek())){e.next();if(is_member(e.current(),t))return true}e.backUp(e.current().length-1)}return false}function greedy(e,r,t){if(e.current().length==1&&r.test(e.current())){while(r.test(e.peek()))e.next();while(0<e.current().length){if(is_member(e.current(),t))return true;e.backUp(1)}e.next()}return false}function doubleQuote(e){return quote(e,'"',"\\")}function singleQuote(e){return quote(e,"'","\\")}function quote(e,r,t){while(!e.eol()){var n=e.next();if(n==r)return true;n==t&&e.next()}return false}function lookahead(e){var r=e.match(/^\s*([^\s%])/,false);return r?r[1]:""}function is_member(e,r){return-1<r.indexOf(e)}function rval(e,r,t){pushToken(e,realToken(t,r));switch(t){case"atom":return"atom";case"attribute":return"attribute";case"boolean":return"atom";case"builtin":return"builtin";case"close_paren":return null;case"colon":return null;case"comment":return"comment";case"dot":return null;case"error":return"error";case"fun":return"meta";case"function":return"tag";case"guard":return"property";case"keyword":return"keyword";case"macro":return"macroName";case"number":return"number";case"open_paren":return null;case"operator":return"operator";case"record":return"bracket";case"separator":return null;case"string":return"string";case"type":return"def";case"variable":return"variable";default:return null}}function aToken(e,r,t,n){return{token:e,column:r,indent:t,type:n}}function realToken(e,r){return aToken(r.current(),r.column(),r.indentation(),e)}function fakeToken(e){return aToken(e,0,0,e)}function peekToken(e,r){var t=e.tokenStack.length;var n=r||1;return!(t<n)&&e.tokenStack[t-n]}function pushToken(e,r){if(!(r.type=="comment"||r.type=="whitespace")){e.tokenStack=maybe_drop_pre(e.tokenStack,r);e.tokenStack=maybe_drop_post(e.tokenStack)}}function maybe_drop_pre(e,r){var t=e.length-1;if(0<t&&e[t].type==="record"&&r.type==="dot")e.pop();else if(0<t&&e[t].type==="group"){e.pop();e.push(r)}else e.push(r);return e}function maybe_drop_post(e){if(!e.length)return e;var r=e.length-1;if(e[r].type==="dot")return[];if(r>1&&e[r].type==="fun"&&e[r-1].token==="fun")return e.slice(0,r-1);switch(e[r].token){case"}":return d(e,{g:["{"]});case"]":return d(e,{i:["["]});case")":return d(e,{i:["("]});case">>":return d(e,{i:["<<"]});case"end":return d(e,{i:["begin","case","fun","if","receive","try"]});case",":return d(e,{e:["begin","try","when","->",",","(","[","{","<<"]});case"->":return d(e,{r:["when"],m:["try","if","case","receive"]});case";":return d(e,{E:["case","fun","if","receive","try","when"]});case"catch":return d(e,{e:["try"]});case"of":return d(e,{e:["case"]});case"after":return d(e,{e:["receive","try"]});default:return e}}function d(e,r){for(var t in r){var n=e.length-1;var a=r[t];for(var o=n-1;-1<o;o--)if(is_member(e[o].token,a)){var i=e.slice(0,o);switch(t){case"m":return i.concat(e[o]).concat(e[n]);case"r":return i.concat(e[n]);case"i":return i;case"g":return i.concat(fakeToken("group"));case"E":return i.concat(e[o]);case"e":return i.concat(e[o])}}}return t=="E"?[]:e}function indenter(e,r,t){var n;var a=wordafter(r);var o=peekToken(e,1);var i=peekToken(e,2);if(e.in_string||e.in_atom)return null;if(i){if(o.token=="when")return o.column+t.unit;if(a==="when"&&i.type==="function")return i.indent+t.unit;if(a==="("&&o.token==="fun")return o.column+3;if(a==="catch"&&(n=getToken(e,["try"])))return n.column;if(is_member(a,["end","after","of"])){n=getToken(e,["begin","case","fun","if","receive","try"]);return n?n.column:null}if(is_member(a,l)){n=getToken(e,s);return n?n.column:null}if(is_member(o.token,[",","|","||"])||is_member(a,[",","|","||"])){n=postcommaToken(e);return n?n.column+n.token.length:t.unit}if(o.token=="->")return is_member(i.token,["receive","case","if","try"])?i.column+t.unit+t.unit:i.column+t.unit;if(is_member(o.token,s))return o.column+o.token.length;n=defaultToken(e);return truthy(n)?n.column+t.unit:0}return 0}function wordafter(e){var r=e.match(/,|[a-z]+|\}|\]|\)|>>|\|+|\(/);return truthy(r)&&r.index===0?r[0]:""}function postcommaToken(e){var r=e.tokenStack.slice(0,-1);var t=getTokenIndex(r,"type",["open_paren"]);return!!truthy(r[t])&&r[t]}function defaultToken(e){var r=e.tokenStack;var t=getTokenIndex(r,"type",["open_paren","separator","keyword"]);var n=getTokenIndex(r,"type",["operator"]);return truthy(t)&&truthy(n)&&t<n?r[t+1]:!!truthy(t)&&r[t]}function getToken(e,r){var t=e.tokenStack;var n=getTokenIndex(t,"token",r);return!!truthy(t[n])&&t[n]}function getTokenIndex(e,r,t){for(var n=e.length-1;-1<n;n--)if(is_member(e[n][r],t))return n;return false}function truthy(e){return e!==false&&e!=null}const k={name:"erlang",startState(){return{tokenStack:[],in_string:false,in_atom:false}},token:tokenizer,indent:indenter,languageData:{commentTokens:{line:"%"}}};export{k as erlang};

