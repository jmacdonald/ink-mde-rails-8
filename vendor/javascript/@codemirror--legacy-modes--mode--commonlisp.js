// @codemirror/legacy-modes/mode/commonlisp@6.4.2 downloaded from https://ga.jspm.io/npm:@codemirror/legacy-modes@6.4.2/mode/commonlisp.js

var e=/^(block|let*|return-from|catch|load-time-value|setq|eval-when|locally|symbol-macrolet|flet|macrolet|tagbody|function|multiple-value-call|the|go|multiple-value-prog1|throw|if|progn|unwind-protect|labels|progv|let|quote)$/;var t=/^with|^def|^do|^prog|case$|^cond$|bind$|when$|unless$/;var n=/^(?:[+\-]?(?:\d+|\d*\.\d+)(?:[efd][+\-]?\d+)?|[+\-]?\d+(?:\/[+\-]?\d+)?|#b[+\-]?[01]+|#o[+\-]?[0-7]+|#x[+\-]?[\da-f]+)/;var r=/[^\s'`,@()\[\]";]/;var a;function readSym(e){var t;while(t=e.next())if(t=="\\")e.next();else if(!r.test(t)){e.backUp(1);break}return e.current()}function base(r,i){if(r.eatSpace()){a="ws";return null}if(r.match(n))return"number";var o=r.next();o=="\\"&&(o=r.next());if(o=='"')return(i.tokenize=inString)(r,i);if(o=="("){a="open";return"bracket"}if(o==")"){a="close";return"bracket"}if(o==";"){r.skipToEnd();a="ws";return"comment"}if(/['`,@]/.test(o))return null;if(o=="|"){if(r.skipTo("|")){r.next();return"variableName"}r.skipToEnd();return"error"}if(o=="#"){o=r.next();if(o=="("){a="open";return"bracket"}if(/[+\-=\.']/.test(o))return null;if(/\d/.test(o)&&r.match(/^\d*#/))return null;if(o=="|")return(i.tokenize=inComment)(r,i);if(o==":"){readSym(r);return"meta"}if(o=="\\"){r.next();readSym(r);return"string.special"}return"error"}var l=readSym(r);if(l==".")return null;a="symbol";return l=="nil"||l=="t"||l.charAt(0)==":"?"atom":i.lastType=="open"&&(e.test(l)||t.test(l))?"keyword":l.charAt(0)=="&"?"variableName.special":"variableName"}function inString(e,t){var n,r=false;while(n=e.next()){if(n=='"'&&!r){t.tokenize=base;break}r=!r&&n=="\\"}return"string"}function inComment(e,t){var n,r;while(n=e.next()){if(n=="#"&&r=="|"){t.tokenize=base;break}r=n}a="ws";return"comment"}const i={name:"commonlisp",startState:function(){return{ctx:{prev:null,start:0,indentTo:0},lastType:null,tokenize:base}},token:function(e,n){e.sol()&&typeof n.ctx.indentTo!="number"&&(n.ctx.indentTo=n.ctx.start+1);a=null;var r=n.tokenize(e,n);if(a!="ws"){n.ctx.indentTo==null?a=="symbol"&&t.test(e.current())?n.ctx.indentTo=n.ctx.start+e.indentUnit:n.ctx.indentTo="next":n.ctx.indentTo=="next"&&(n.ctx.indentTo=e.column());n.lastType=a}a=="open"?n.ctx={prev:n.ctx,start:e.column(),indentTo:null}:a=="close"&&(n.ctx=n.ctx.prev||n.ctx);return r},indent:function(e){var t=e.ctx.indentTo;return typeof t=="number"?t:e.ctx.start+1},languageData:{commentTokens:{line:";;",block:{open:"#|",close:"|#"}},closeBrackets:{brackets:["(","[","{",'"']}}};export{i as commonLisp};

